<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How I Built a Treasury Analyst in Claude / Rafael Pardo</title>
<link rel="canonical" href="https://rpardo.ai/treasury-analyst-claude.html">
<link rel="alternate" hreflang="en" href="https://rpardo.ai/treasury-analyst-claude.html">
<link rel="alternate" hreflang="es" href="https://rpardo.ai/es/treasury-analyst-claude.html">
<link rel="alternate" hreflang="x-default" href="https://rpardo.ai/treasury-analyst-claude.html">
<meta name="description" content="A practical walkthrough of designing an AI treasury analyst. What worked, what failed, and the gap between prompt engineering and product design.">
<meta property="og:title" content="How I Built a Treasury Analyst in Claude (And What It Taught Me About AI Product Design)">
<meta property="og:description" content="What worked, what failed, and the gap between prompt engineering and actual product design.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://rpardo.ai/treasury-analyst-claude.html">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='12' fill='%230E1520'/><text x='50' y='68' font-family='monospace' font-size='52' font-weight='700' fill='%238AACC6' text-anchor='middle'>R</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700&family=Newsreader:ital,opsz,wght@0,6..72,200;0,6..72,300;0,6..72,400;0,6..72,500;1,6..72,200;1,6..72,300;1,6..72,400&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --void: #020202; --black: #080808; --deep: #0E1520;
    --accent: #5A7A9B; --accent-hi: #8AACC6;
    --steel: #525250; --ash: #6E6B64; --warm: #96918A;
    --silver: #BAB6AE; --cream: #F0EDE6;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body {
    font-family: 'Outfit', sans-serif;
    background: var(--black);
    color: var(--cream);
    -webkit-font-smoothing: antialiased;
  }
  body::after {
    content: ''; position: fixed; inset: 0; z-index: 9999;
    pointer-events: none; opacity: 0.028;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-repeat: repeat; background-size: 180px;
  }
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
    padding: 0 48px; height: 64px; display: flex;
    align-items: center; justify-content: space-between;
    background: rgba(2,2,2,0.85); backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border-bottom: 1px solid rgba(90,122,155,0.1);
  }
  .nav-logo { font-family: 'JetBrains Mono', monospace; font-size: 13px; font-weight: 600; letter-spacing: 3px; color: var(--cream); text-decoration: none; text-transform: uppercase; }
  .nav-back { font-size: 12px; font-weight: 400; letter-spacing: 1px; color: var(--warm); text-decoration: none; transition: color 0.3s ease; }
  .nav-back:hover { color: var(--cream); }
  .nav-right { display: flex; align-items: center; gap: 24px; }
  .nav-lang { font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 1.5px; display: flex; align-items: center; gap: 6px; }
  .nav-lang span { padding: 3px 7px; border-radius: 3px; transition: color 0.3s ease, background 0.3s ease; }
  .nav-lang .active { color: var(--cream); background: rgba(90,122,155,0.15); }
  .nav-lang .inactive { color: var(--ash); cursor: pointer; }
  .nav-lang .inactive:hover { color: var(--cream); }
  .nav-lang-sep { color: var(--steel); font-weight: 300; user-select: none; }
  .article-header { padding: 140px 40px 60px; max-width: 720px; margin: 0 auto; }
  .article-meta { font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: var(--accent); margin-bottom: 20px; }
  .article-title { font-family: 'Newsreader', serif; font-size: 38px; font-weight: 300; line-height: 1.3; margin-bottom: 20px; }
  .article-subtitle { font-size: 16px; font-weight: 300; color: var(--warm); line-height: 1.7; margin-bottom: 32px; }
  .article-info { font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 1px; color: var(--ash); padding-bottom: 40px; border-bottom: 1px solid rgba(90,122,155,0.08); }
  .article-body { max-width: 720px; margin: 0 auto; padding: 48px 40px 100px; }
  .article-body p { font-size: 16px; font-weight: 300; color: var(--silver); line-height: 1.9; margin-bottom: 24px; }
  .article-body strong { color: var(--cream); font-weight: 500; }
  .article-body em { color: var(--accent-hi); font-style: italic; }
  .article-body h2 { font-family: 'Newsreader', serif; font-size: 26px; font-weight: 400; color: var(--cream); margin: 48px 0 20px; }
  .article-body h3 { font-family: 'Outfit', sans-serif; font-size: 16px; font-weight: 600; color: var(--cream); letter-spacing: 0.5px; margin: 36px 0 12px; }
  .article-body blockquote { border-left: 2px solid var(--accent); padding: 4px 0 4px 24px; margin: 32px 0; }
  .article-body blockquote p { font-family: 'Newsreader', serif; font-size: 18px; font-style: italic; color: var(--accent-hi); line-height: 1.7; }
  .article-body ul, .article-body ol { margin: 0 0 24px 20px; color: var(--silver); }
  .article-body li { font-size: 16px; font-weight: 300; line-height: 1.8; margin-bottom: 8px; }
  .article-body code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    background: var(--deep);
    color: var(--accent-hi);
    padding: 2px 8px;
    border-radius: 4px;
  }
  .article-body pre {
    background: var(--deep);
    border: 1px solid rgba(90,122,155,0.1);
    border-radius: 6px;
    padding: 20px 24px;
    overflow-x: auto;
    margin: 24px 0;
  }
  .article-body pre code {
    background: none;
    padding: 0;
    font-size: 13px;
    line-height: 1.7;
    color: var(--silver);
  }
  .callout { background: var(--deep); border-left: 3px solid var(--accent); padding: 24px 28px; margin: 36px 0; border-radius: 0 6px 6px 0; }
  .callout p { margin-bottom: 8px; font-size: 14px; }
  .callout p:last-child { margin-bottom: 0; }
  .arch-diagram {
    background: var(--deep);
    border: 1px solid rgba(90,122,155,0.12);
    border-radius: 8px;
    padding: 32px;
    margin: 36px 0;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    line-height: 1.8;
    color: var(--silver);
    white-space: pre;
    overflow-x: auto;
  }
  .arch-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 12px;
    display: block;
  }
  .article-footer { max-width: 720px; margin: 0 auto; padding: 0 40px 80px; border-top: 1px solid rgba(90,122,155,0.08); padding-top: 40px; }
  .author-info { flex: 1; }
  .author-name { font-size: 15px; font-weight: 500; color: var(--cream); margin-bottom: 4px; }
  .author-bio { font-size: 13px; font-weight: 300; color: var(--warm); line-height: 1.6; }
  .author-bio a { color: var(--accent-hi); text-decoration: none; }
  .author-bio a:hover { color: var(--cream); }
  footer { background: var(--void); padding: 48px 40px; border-top: 1px solid rgba(90,122,155,0.06); text-align: center; }
  .footer-logo { font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 500; letter-spacing: 3px; text-transform: uppercase; color: var(--ash); margin-bottom: 12px; }
  .footer-copy { font-size: 11px; color: var(--steel); }
  @media (max-width: 768px) {
    nav { padding: 0 24px; }
    .article-header { padding: 100px 24px 40px; }
    .article-title { font-size: 28px; }
    .article-body { padding: 32px 24px 80px; }
    .article-footer { padding: 0 24px 60px; padding-top: 32px; }
    .arch-diagram { font-size: 10px; padding: 16px; }
  }

  .article-cta { max-width: 720px; margin: 0 auto; padding: 0 40px 48px; display: flex; gap: 24px; flex-wrap: wrap; }
  .article-cta a { font-family: 'JetBrains Mono', monospace; font-size: 11px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--accent-hi); text-decoration: none; padding: 10px 20px; border: 1px solid rgba(90,122,155,0.3); border-radius: 2px; transition: all 0.3s; }
  .article-cta a:hover { background: rgba(90,122,155,0.1); border-color: var(--accent); }
</style>
</head>
<body>

<nav>
  <a href="/" class="nav-logo">rpardo.ai</a>
  <div class="nav-right">
    <a href="/#insights" class="nav-back">← Back to Insights</a>
    <div class="nav-lang">
      <span class="active">EN</span>
      <span class="nav-lang-sep">/</span>
      <a href="/es/treasury-analyst-claude.html" style="text-decoration:none"><span class="inactive">ES</span></a>
    </div>
  </div>
</nav>

<article>
  <div class="article-header">
    <div class="article-meta">Technical / Building with Claude</div>
    <h1 class="article-title">How I Built a Treasury Analyst in Claude (And What It Taught Me About AI Product Design)</h1>
    <p class="article-subtitle">The gap between prompt engineering and product design is wider than most people think.</p>
    <div class="article-info">Rafael Pardo · 11 min read · 14 February 2026</div>
  </div>

  <div class="article-body">
    <p>
      Six months ago, I set out to build something specific: an AI system that could do what I'd been doing manually for seven years as a treasury operations manager. Not a chatbot. Not a summariser. A <strong>treasury analyst</strong> that could ingest real financial data, reason about it the way an experienced operator would, and produce outputs that a CFO could actually use.
    </p>
    <p>
      I chose Claude for the build. What followed was a crash course in the difference between prompt engineering (getting an LLM to produce good text) and AI product design (building a system that reliably produces correct decisions under real-world conditions). They're not the same thing, and conflating them is the most common mistake I see in the AI product space.
    </p>
    <p>
      This is a walkthrough of what I built, the architecture decisions behind each component, what worked, what failed, and the design principles I extracted from the process.
    </p>

    <h2>The Problem: Cash Flow Forecasting Is Broken</h2>
    <p>
      Every treasury team I've worked with forecasts cash flow the same way. They take historical collection behaviours (what percentage of invoices get paid at 30, 60, 90 days), average them, and apply those averages to the current receivables portfolio. It's a spreadsheet exercise, usually maintained by one person who understands the formulas, and it breaks the moment that person goes on holiday.
    </p>
    <p>
      The fundamental problem isn't complexity. It's that the standard approach ignores at least three things that matter enormously: <strong>seasonality</strong> (clients pay differently in December than in March), <strong>recency bias</strong> (last month's collection behaviour is more predictive than behaviour from 12 months ago), and <strong>partial payments</strong> (a growing percentage of collections that traditional models either ignore or misclassify).
    </p>
    <p>
      I'd already solved this manually. I built a collections behaviour model using weighted moving averages with a decay factor (λ=0.9, meaning each month's data is weighted 10% less than the next), seasonal indices calculated per collection bucket, and explicit handling of partial payment patterns. It improved forecast accuracy by roughly 30% compared to simple averages. But it was a spreadsheet, and it took me a full day each month to update across 10 countries.
    </p>
    <p>
      The question was: could Claude do this reliably?
    </p>

    <h2>Architecture: Skills, Not Prompts</h2>
    <p>
      The first thing I learned is that a single prompt, no matter how well-crafted, is the wrong abstraction for a complex analytical task. What you need is a <strong>skill</strong>: a structured set of instructions, context, and tool definitions that the model can use to execute a multi-step workflow.
    </p>
    <p>
      My treasury analyst skill has four components:
    </p>

    <span class="arch-label">System Architecture</span>
    <div style="margin:36px 0;overflow-x:auto;">
      <svg viewBox="0 0 640 520" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:640px;display:block;margin:0 auto;">
        <defs>
          <linearGradient id="cardGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#12202e"/>
            <stop offset="100%" stop-color="#0E1520"/>
          </linearGradient>
          <linearGradient id="accentLine" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#5A7A9B" stop-opacity="0"/>
            <stop offset="50%" stop-color="#5A7A9B" stop-opacity="1"/>
            <stop offset="100%" stop-color="#5A7A9B" stop-opacity="0"/>
          </linearGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="3" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>

        <!-- Main card -->
        <rect x="32" y="16" width="576" height="260" rx="8" fill="url(#cardGrad)" stroke="#5A7A9B" stroke-opacity="0.15" stroke-width="1"/>

        <!-- Title bar -->
        <rect x="32" y="16" width="576" height="40" rx="8" fill="#5A7A9B" fill-opacity="0.07"/>
        <rect x="32" y="48" width="576" height="8" rx="0" fill="url(#cardGrad)"/>
        <text x="320" y="42" text-anchor="middle" font-family="'JetBrains Mono',monospace" font-size="11" font-weight="600" letter-spacing="3" fill="#8AACC6">SKILL DEFINITION</text>

        <!-- Four rows -->
        <!-- Context -->
        <circle cx="72" cy="88" r="4" fill="#5A7A9B" fill-opacity="0.5"/>
        <text x="92" y="84" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="1.5" fill="#8AACC6" text-transform="uppercase">CONTEXT</text>
        <text x="92" y="100" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Domain rules, terminology, country-specific norms</text>

        <!-- Divider -->
        <line x1="64" y1="118" x2="576" y2="118" stroke="#5A7A9B" stroke-opacity="0.08" stroke-width="1"/>

        <!-- Tools -->
        <circle cx="72" cy="142" r="4" fill="#5A7A9B" fill-opacity="0.5"/>
        <text x="92" y="138" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="1.5" fill="#8AACC6">TOOLS</text>
        <text x="92" y="154" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Data ingestion, SQL generation, calculation engine, output formatting</text>

        <!-- Divider -->
        <line x1="64" y1="172" x2="576" y2="172" stroke="#5A7A9B" stroke-opacity="0.08" stroke-width="1"/>

        <!-- Workflow -->
        <circle cx="72" cy="196" r="4" fill="#5A7A9B" fill-opacity="0.5"/>
        <text x="92" y="192" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="1.5" fill="#8AACC6">WORKFLOW</text>
        <!-- Flow pills -->
        <rect x="92" y="201" width="60" height="22" rx="11" fill="#5A7A9B" fill-opacity="0.1" stroke="#5A7A9B" stroke-opacity="0.2" stroke-width="0.75"/>
        <text x="122" y="216" text-anchor="middle" font-family="'Outfit',sans-serif" font-size="10" font-weight="400" fill="#BAB6AE">Ingest</text>
        <text x="164" y="216" font-family="'Outfit',sans-serif" font-size="11" fill="#5A7A9B">→</text>
        <rect x="178" y="201" width="68" height="22" rx="11" fill="#5A7A9B" fill-opacity="0.1" stroke="#5A7A9B" stroke-opacity="0.2" stroke-width="0.75"/>
        <text x="212" y="216" text-anchor="middle" font-family="'Outfit',sans-serif" font-size="10" font-weight="400" fill="#BAB6AE">Validate</text>
        <text x="258" y="216" font-family="'Outfit',sans-serif" font-size="11" fill="#5A7A9B">→</text>
        <rect x="272" y="201" width="66" height="22" rx="11" fill="#5A7A9B" fill-opacity="0.1" stroke="#5A7A9B" stroke-opacity="0.2" stroke-width="0.75"/>
        <text x="305" y="216" text-anchor="middle" font-family="'Outfit',sans-serif" font-size="10" font-weight="400" fill="#BAB6AE">Analyse</text>
        <text x="350" y="216" font-family="'Outfit',sans-serif" font-size="11" fill="#5A7A9B">→</text>
        <rect x="364" y="201" width="74" height="22" rx="11" fill="#5A7A9B" fill-opacity="0.1" stroke="#5A7A9B" stroke-opacity="0.2" stroke-width="0.75"/>
        <text x="401" y="216" text-anchor="middle" font-family="'Outfit',sans-serif" font-size="10" font-weight="400" fill="#BAB6AE">Calculate</text>
        <text x="450" y="216" font-family="'Outfit',sans-serif" font-size="11" fill="#5A7A9B">→</text>
        <rect x="464" y="201" width="62" height="22" rx="11" fill="#5A7A9B" fill-opacity="0.15" stroke="#5A7A9B" stroke-opacity="0.3" stroke-width="0.75"/>
        <text x="495" y="216" text-anchor="middle" font-family="'Outfit',sans-serif" font-size="10" font-weight="500" fill="#8AACC6">Output</text>

        <!-- Divider -->
        <line x1="64" y1="238" x2="576" y2="238" stroke="#5A7A9B" stroke-opacity="0.08" stroke-width="1"/>

        <!-- Guards -->
        <circle cx="72" cy="258" r="4" fill="#5A7A9B" fill-opacity="0.5"/>
        <text x="92" y="254" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="1.5" fill="#8AACC6">GUARDS</text>
        <text x="92" y="270" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Confidence thresholds, sanity checks, escalation rules</text>

        <!-- Connection lines -->
        <line x1="200" y1="276" x2="200" y2="340" stroke="#5A7A9B" stroke-opacity="0.25" stroke-width="1"/>
        <polygon points="196,338 204,338 200,346" fill="#5A7A9B" fill-opacity="0.4"/>

        <line x1="440" y1="276" x2="440" y2="340" stroke="#5A7A9B" stroke-opacity="0.25" stroke-width="1"/>
        <polygon points="436,338 444,338 440,346" fill="#5A7A9B" fill-opacity="0.4"/>

        <!-- Horizontal accent line -->
        <rect x="32" y="326" width="576" height="1" fill="url(#accentLine)" opacity="0.15"/>

        <!-- Data Layer card -->
        <rect x="32" y="350" width="268" height="154" rx="8" fill="url(#cardGrad)" stroke="#5A7A9B" stroke-opacity="0.12" stroke-width="1"/>
        <text x="166" y="380" text-anchor="middle" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="2" fill="#5A7A9B">DATA LAYER</text>

        <!-- Data items -->
        <circle cx="64" cy="408" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="78" y="412" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">NetSuite data</text>
        <circle cx="64" cy="432" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="78" y="436" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Bank statements</text>
        <circle cx="64" cy="456" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="78" y="460" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Cohort files</text>
        <circle cx="64" cy="480" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="78" y="484" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Country configs</text>

        <!-- Output Layer card -->
        <rect x="340" y="350" width="268" height="154" rx="8" fill="url(#cardGrad)" stroke="#5A7A9B" stroke-opacity="0.12" stroke-width="1"/>
        <text x="474" y="380" text-anchor="middle" font-family="'JetBrains Mono',monospace" font-size="9" font-weight="600" letter-spacing="2" fill="#5A7A9B">OUTPUT LAYER</text>

        <!-- Output items -->
        <circle cx="372" cy="408" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="386" y="412" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Looker-ready forecasts</text>
        <circle cx="372" cy="432" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="386" y="436" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Slack alerts</text>
        <circle cx="372" cy="456" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="386" y="460" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Exception reports</text>
        <circle cx="372" cy="480" r="2.5" fill="#5A7A9B" fill-opacity="0.4"/>
        <text x="386" y="484" font-family="'Outfit',sans-serif" font-size="12" fill="#BAB6AE">Confidence scores</text>
      </svg>
    </div>

    <p>
      The <strong>context layer</strong> is where operational knowledge lives. This isn't a generic system prompt. It encodes specific domain rules: how securitisation facilities affect cash-in timing, why UK and Spanish collection patterns differ structurally, what a "partial payment" means in practice versus theory. I spent more time writing this context than any other part of the system. It's the equivalent of hiring an analyst and giving them a month of onboarding.
    </p>

    <h2>Design Decision 1: Structured Outputs Over Free Text</h2>
    <p>
      My first iteration let Claude generate free-text analysis. "Based on the data, Spain's collections appear to be declining..." The output was eloquent and useless. A CFO doesn't want prose. They want a number, a confidence interval, and a one-line explanation of what changed.
    </p>
    <p>
      I redesigned the output layer to enforce structured responses. Every analysis produces a JSON object with specific fields: forecast value, confidence level (0-100), variance from previous forecast, top three drivers of change, and a recommended action. The free-text explanation became optional context, not the primary output.
    </p>

    <div class="callout">
      <p><strong>Design principle:</strong> LLMs are seductive because they produce human-readable output. In operational contexts, this is a bug, not a feature. Your AI analyst should produce machine-readable decisions that humans can review, not essays that humans need to interpret.</p>
    </div>

    <h2>Design Decision 2: Calculation Verification</h2>
    <p>
      LLMs are unreliable at arithmetic. This is well-known, but the implications for financial product design are underappreciated. My treasury analyst performs calculations: weighted averages, seasonal adjustments, variance analysis. If any of these are wrong, the output is worse than useless because it looks authoritative.
    </p>
    <p>
      The solution was to separate <em>reasoning</em> from <em>calculation</em>. Claude determines <em>what</em> needs to be calculated and <em>why</em>, then calls external tools to perform the actual maths. The weighted moving average formula, the seasonal index computation, the forecast aggregation: these all execute as deterministic code, not LLM inference.
    </p>
    <p>
      Claude's role becomes orchestration and interpretation: deciding which calculation to run, on which data subset, and what the result means in business context. This is what LLMs are genuinely good at. The numbers themselves never touch the model's reasoning.
    </p>

    <h2>Design Decision 3: Country-Specific Reasoning</h2>
    <p>
      One of the biggest failures in my early iterations was treating all countries identically. The model would analyse Spanish receivables using assumptions that were only valid for the UK. This produced technically correct but operationally meaningless outputs.
    </p>
    <p>
      I solved this with <strong>country configuration files</strong>: structured documents that encode the specific characteristics of each market. Spain's config includes: typical payment terms (60-90 days), securitisation facility rules and their impact on cash-in timing, seasonal patterns (August is dead, January is slow, September recovery). The UK config is entirely different: shorter payment terms (30 days), invoice finance mechanics, and a December slowdown that doesn't affect Spain the same way.
    </p>
    <p>
      When the skill processes data for a specific country, it loads the corresponding config and adjusts its reasoning accordingly. This was a product design decision, not a prompt engineering one. The model doesn't need to "learn" country differences from examples. It needs access to structured domain knowledge that constrains its reasoning appropriately.
    </p>

    <h2>What Failed</h2>

    <h3>Failure 1: Overconfident anomaly detection</h3>
    <p>
      I built an anomaly detection module that was supposed to flag unusual collection patterns. It flagged everything. A client paying 3 days earlier than usual? Anomaly. A seasonal dip that happens every August? Anomaly. The model had no concept of baseline volatility.
    </p>
    <p>
      The fix was adding a statistical context layer: for each metric, the system calculates the historical coefficient of variation. Anomalies are only flagged when they exceed 2 standard deviations from the country-specific, seasonally-adjusted baseline. This cut false positives by roughly 80%.
    </p>

    <h3>Failure 2: The "helpful analyst" problem</h3>
    <p>
      Claude is trained to be helpful. In a treasury context, this means it will find a narrative to explain any data pattern, even when the correct answer is "the data is incomplete" or "there's no statistically significant trend here." My early system would confidently explain a 2% variance that was well within normal noise.
    </p>
    <p>
      I addressed this by adding explicit <strong>materiality thresholds</strong> to the skill definition. Variances below €100K or 5% are noted but not analysed. The system is instructed to distinguish between "this is a real signal" and "this is noise" before generating any explanation. It sounds simple. Getting it to work reliably took dozens of iterations.
    </p>

    <h3>Failure 3: Temporal reasoning</h3>
    <p>
      The skill needed to reason about time: "collections from invoices issued in March that are currently at 90+ days." LLMs are surprisingly poor at temporal reasoning when the relationships are implicit. I had to restructure data inputs so that temporal relationships were explicit: every data point tagged with issue date, due date, current aging bucket, and collection date. Pre-processing that would be trivial for a human analyst turned out to be critical for reliable AI performance.
    </p>

    <h2>What I Learned About AI Product Design</h2>
    <p>
      Building this system taught me five things that I haven't seen in any AI PM curriculum:
    </p>
    <ol>
      <li><strong>The 80/20 rule is inverted.</strong> 80% of your development time should go into the 20% of cases that are exceptions. The standard cases are easy. The edge cases are where your product either earns trust or loses it permanently.</li>
      <li><strong>Domain context is more important than model selection.</strong> The difference between Claude Sonnet and Claude Opus mattered far less than the difference between a generic prompt and a well-structured skill with proper domain context. Most AI product discussions focus on the wrong variable.</li>
      <li><strong>Deterministic rails matter.</strong> Any step that requires precision (arithmetic, date calculations, currency conversion) should be executed deterministically, not inferred by the model. The LLM orchestrates; code calculates.</li>
      <li><strong>Confidence calibration is a product feature.</strong> The system's ability to say "I'm 60% confident and here's why" is more valuable than being right 90% of the time without expressing uncertainty. Finance professionals trust systems that know their own limits.</li>
      <li><strong>Iteration speed is everything.</strong> I went through 40+ versions of the skill definition. Each iteration was informed by real data producing wrong results. You can't design an AI product in a specification document. You design it by shipping, failing, and fixing.</li>
    </ol>

    <h2>Where This Goes Next</h2>
    <p>
      The treasury analyst skill is a proof of concept for something bigger: <strong>autonomous financial agents that can operate across entire treasury functions</strong>. Cash application, collections optimisation, liquidity forecasting, counterparty risk monitoring: each of these is a skill that can be designed with the same framework. Connected together through an orchestration layer, they form the autonomous treasury stack.
    </p>
    <p>
      I'm not building a product to sell. I'm building the technical intuition to design these systems at scale. Every skill I build, every failure I debug, every design principle I extract: it's preparation for the moment when a company with €1B+ in receivables decides they want their treasury function to run itself.
    </p>
    <p>
      That moment is coming faster than most people think.
    </p>
  </div>

  <div class="article-cta">
    <a href="/#work">See my work &rarr;</a>
    <a href="https://calendar.app.google/XjYf9iPya1X9JUWd7" target="_blank" rel="noopener">Schedule a conversation &rarr;</a>
  </div>

  <div class="article-footer">
    <div class="article-author">
      <div class="author-info">
        <div class="author-name">Rafael Pardo</div>
        <div class="author-bio">AI Product Manager. Built the treasury infrastructure at a €2.3B unicorn. Now I design AI agents that make it autonomous. <a href="mailto:rafael@rpardo.ai">rafael@rpardo.ai</a> · <a href="https://www.linkedin.com/in/rpardo-ai/" target="_blank">LinkedIn</a></div>
      </div>
    </div>
  </div>
</article>

<footer>
  <div class="footer-logo">rpardo.ai</div>
  <div class="footer-copy">© 2026 Rafael Pardo. All rights reserved.</div>
</footer>

</body>
</html>
